#----------------------------------------------------------------------------------------------------------------------------------#
# MAKEFILE for IIMS
#----------------------------------------------------------------------------------------------------------------------------------#
# FORTRAN FLAGS:
FFLAG   =  -O3  -fopenmp -g -cpp -finit-real=nan -Wall -ffree-line-length-none -fdefault-real-8 -fdefault-double-8 -w
# DEBUG
#FFLAG   =  -O0 -fbacktrace -fbounds-check -g -cpp -finit-real=nan
#----------------------------------------------------------------------------------------------------------------------------------#
# LIBRARIES:
LIBS = 
#----------------------------------------------------------------------------------------------------------------------------------#
obj     = linSolve.x

#--- Fortran Compiler for Linux
FCOMPL90 = gfortran
FCOMPL77 = gfortran

#----------------------------------------------------------------------------------------------------------------------------------#
# list of other directories for source files
.PREFIXES: .

.SUFFIXES:
.SUFFIXES: .F90 .o 
.SUFFIXES: .F .o 

.F90.o:
	${FCOMPL90} ${FFLAG} -c ${LIBS} $<
.F.o:
	${FCOMPL77} ${FFLAG} -c ${LIBS} $<

#----------------------------------------------------------------------------------------------------------------------------------#
MODULES = dimensions.o LinearSolver.o \

FILES   = linSolve.o output.o \

OBJECTS = ${MODULES} ${FILES}
#--------------------------------------------------------------------------------------------------------------------------------#
APPLIC: ${OBJECTS}
	${FCOMPL90} ${FFLAG} -o ${obj} ${OBJECTS} ${LIBS}
	chmod 710 ${obj}
#	cp ${obj} ~/bin

clean:
	@rm -f ${OBJECTS} *.mod *.o linSolve.x
#----------------------------------------------------------------------------------------------------------------------------------#
